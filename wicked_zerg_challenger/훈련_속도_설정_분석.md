# 훈련 속도 설정 분석: 왜 배속으로 안 돌리는가?

**작성 일시**: 2026-01-19

---

## ? 현재 상태

### 설정 확인
- **`run_with_training.py`**: `realtime=False` ? (배속 모드)
- **`comprehensive_training_workflow_5x_v2.py`**: `run_with_training.py` 호출 (플래그 없음)

---

## ? 왜 기본값이 `realtime=True`였는가?

### 1. **디버깅 및 시각적 확인**
```python
# 기본값: realtime=True
realtime=True  # True = real-time speed with visible game window
```
- 게임 창을 보고 싶을 때 유용
- 봇의 행동을 실시간으로 관찰 가능
- 문제 발생 시 즉시 확인 가능

### 2. **초기 개발 단계**
- 봇이 제대로 작동하는지 확인 필요
- 게임 로직 검증을 위해 시각적 피드백 중요
- 학습 데이터가 올바르게 수집되는지 확인

### 3. **사용자 경험**
- 게임을 보면서 훈련 진행 상황 확인
- 재미있는 요소 (게임 플레이 관찰)

---

## ? 배속 모드 (`realtime=False`)의 장점

### 1. **훈련 속도 향상**
- 게임이 가능한 최대 속도로 실행
- 실시간 속도 대비 **5-10배 빠른 훈련**
- 예: 1시간 게임 → 6-12분으로 단축

### 2. **리소스 효율성**
- 게임 창 렌더링 비용 제거
- CPU/GPU 사용량 감소
- 메모리 사용량 감소

### 3. **배치 훈련에 최적**
- 여러 게임을 빠르게 실행
- 장시간 무인 훈련 가능
- 데이터 수집 속도 향상

---

## ? 배속이 작동하지 않는 경우

### 1. **설정이 덮어씌워지는 경우**
```python
# 다른 스크립트에서 realtime=True로 설정
run_game(..., realtime=True)  # ? 덮어쓰기
```

### 2. **환경 변수나 명령줄 인자**
```bash
# 환경 변수로 설정
export SC2_REALTIME=True

# 명령줄 인자
python run_with_training.py --realtime True
```

### 3. **SC2 게임 모드 제약**
- 일부 게임 모드에서는 속도 제한
- 캠페인 모드: 속도 고정
- 특정 난이도: 속도 조절 불가

### 4. **렌더링 모드**
- GUI 모드: 렌더링 비용으로 속도 저하
- Headless 모드: 배속 효과 최대화

---

## ? 현재 설정 확인

### `run_with_training.py` (327번 줄)
```python
run_game(
    map_instance,
    [
        bot,
        Computer(opponent_race, difficulty)
    ],
    realtime=False  # ? 배속 모드 활성화
)
```

### `comprehensive_training_workflow_5x_v2.py`
```python
# Step 3: Game training
success3, _ = run_command(
    [sys.executable, str(run_training)],  # ? 플래그 없음 = 로컬 모드
    project_root,
    f"Iteration {iteration} - Game Training",
    timeout=3600
)
```

---

## ? 추가 최적화 옵션

### 1. **step_multiplier 사용** (고급)
```python
# parallel_train_integrated.py에서 사용
# Performance Optimization: realtime = False + step_multiplier support
run_game(
    ...,
    realtime=False,
    step_multiplier=4  # 4배 속도 (가능한 경우)
)
```

### 2. **Headless 모드**
```python
# 게임 창 완전 비활성화
run_game(
    ...,
    realtime=False,
    render=False  # 렌더링 비활성화
)
```

### 3. **병렬 훈련**
```python
# parallel_train_integrated.py 사용
# 여러 인스턴스를 동시에 실행
python local_training/scripts/parallel_train_integrated.py
```

---

## ? 성능 비교

| 모드 | 속도 | 게임 창 | 리소스 사용 | 용도 |
|------|------|---------|-------------|------|
| `realtime=True` | 1x (실시간) | ? 표시 | 높음 | 디버깅, 관찰 |
| `realtime=False` | 5-10x (배속) | ? 없음 | 낮음 | 훈련, 배치 |

---

## ? 권장 사항

### 훈련 시
- ? `realtime=False` 사용 (현재 설정)
- ? Headless 모드 권장
- ? 배치 훈련에 최적

### 디버깅 시
- ? `realtime=True` 사용
- ? 게임 창 표시
- ? 실시간 관찰

---

## ? 문제 해결 체크리스트

1. ? `run_with_training.py`에서 `realtime=False` 확인
2. ? 워크플로우 스크립트에서 플래그 확인
3. ? 환경 변수 확인 (`SC2_REALTIME`)
4. ? 명령줄 인자 확인 (`--realtime`)
5. ? 게임 모드 확인 (Custom/AI vs)
6. ? 렌더링 모드 확인 (Headless 권장)

---

## ? 결론

**현재 설정은 배속 모드로 올바르게 구성되어 있습니다.**

- `realtime=False`로 설정됨 ?
- 로컬 훈련 모드로 실행됨 ?
- 배치 훈련에 최적화됨 ?

만약 배속이 작동하지 않는다면:
1. SC2 게임 모드 확인
2. 환경 변수 확인
3. 명령줄 인자 확인
4. 로그에서 실제 실행 속도 확인

---

**참고**: `parallel_train_integrated.py`는 더 고급 최적화 옵션(`step_multiplier`)을 제공합니다.
