# 10회 반복 자동화 워크플로우 가이드

## 개요

전체 워크플로우를 **10번 자동 반복**하여 지속적인 개선을 수행합니다.

각 반복마다:
1. 정밀검사 및 에러 수정 (반복)
2. 스타일 통일화
3. 리플레이 학습 및 전체 로직검사
4. 게임학습 시작
5. 학습 완료 후 로직검사 및 에러 수정
6. 리플레이 비교 학습 (프로 vs 봇)
7. 빌드오더 학습
8. 프로세스 정리

## 실행 방법

### 방법 1: 배치 파일 (권장)
```batch
cd wicked_zerg_challenger
bat\iterative_training_workflow_10x.bat
```

### 방법 2: Python 직접 실행
```bash
cd wicked_zerg_challenger
python tools\iterative_training_workflow.py
```

## 워크플로우 상세

### 각 반복의 단계

#### 1. 정밀검사 (Precision Check)
- 전체 소스코드 에러 점검
- 에러 발견 시 자동 수정 (최대 5회 반복)
- 로직 겹침 확인 및 수정

#### 2. 스타일 통일화 (Code Style Unification)
- autopep8 표준 포맷팅
- autopep8 aggressive 포맷팅
- 코드 스타일 일관성 유지

#### 3. 리플레이 학습 및 로직검사
- 리플레이 빌드오더 학습 시작
- 전체 로직검사 실행
- 학습 데이터 준비

#### 4. 정밀검사 (Pre-Training)
- 게임 학습 전 최종 에러 점검
- 학습 방해 요소 제거

#### 5. 게임학습 시작
- `run_with_training.py` 실행
- 백그라운드 모드로 실행
- 최대 2시간 대기 (각 반복당)

#### 6. 학습 완료 대기
- 자동 프로세스 모니터링
- 학습 완료 감지
- 최대 2시간 대기

#### 7. 학습 후 로직검사 및 에러 수정
- 학습 완료 후 에러 점검
- 발견된 에러 자동 수정
- 버그 수정 및 로직 확인

#### 8. 리플레이 비교 학습
- 프로게이머 리플레이 vs 봇 리플레이 비교
- 차이점 분석
- 학습 데이터 적용

#### 9. 리플레이 학습 데이터 분석
- 빌드오더 학습 실행
- 학습 데이터 비교 분석
- 파라미터 업데이트

#### 10. 프로세스 정리
- 불필요한 프로세스 종료
- 리소스 정리
- 다음 반복 준비

## 주요 특징

### 자동 반복 실행
- 10번 자동 반복
- 각 반복마다 독립 실행
- 중간 오류 시에도 다음 반복 계속 진행

### 에러 자동 수정
- 에러 발견 시 자동 수정 (최대 5회 반복)
- 명령 겹침 로직 자동 확인
- 게임 정상 작동까지 반복 시도

### 리플레이 비교 학습
- 프로게이머 리플레이 학습
- 봇 리플레이 학습
- 상호 비교 및 개선

### 빌드오더 학습
- 프로 리플레이에서 빌드오더 추출
- 학습된 파라미터를 게임 훈련에 적용
- 지속적 개선

## 실행 시간 예상

### 각 반복당 시간
- 정밀검사: 5-10분
- 스타일 통일화: 5-10분
- 리플레이 학습: 30분-1시간
- 게임 학습: 0.5-2시간 (설정 가능)
- 비교 학습: 30분-1시간
- **총 1.5-4시간/반복**

### 전체 10회 반복
- **예상 시간: 15-40시간** (게임 학습 시간에 따라 변동)

## 중단 및 재시작

### 중단 방법
- `Ctrl+C`로 언제든 중단 가능
- 현재 반복 완료 후 정리 수행

### 재시작
- 중단된 지점부터 수동 재시작
- 또는 처음부터 다시 실행

## 결과 확인

### 학습 데이터
- `local_training/scripts/learned_build_orders.json`: 학습된 빌드오더 파라미터
- `local_training/models/`: 학습된 모델 파일
- `local_training/extracted_data/`: 추출된 데이터

### 비교 리포트
- `local_training/comparison_reports/`: 프로 vs 봇 비교 리포트
- `local_training/comparison_analysis_report.md`: 분석 리포트

### 로그 파일
- 각 단계별 로그 출력
- 에러 발생 시 상세 정보 출력

## 주의사항

### 시스템 리소스
- 장시간 실행 (15-40시간)
- CPU, 메모리 사용량 높음
- 디스크 공간 필요 (리플레이 데이터)

### 중단 시
- `Ctrl+C`로 안전하게 중단 가능
- 현재 반복 완료 후 정리 수행
- 중단 후 수동 재시작 필요

### 게임 학습 시간
- 기본: 반복당 최대 2시간
- `iterative_training_workflow.py`에서 `wait_for_training_completion(max_wait_hours=2)` 수정 가능

## 개선 사항

### 자동 개선
- 각 반복마다 에러 자동 수정
- 코드 스타일 자동 통일화
- 로직 겹침 자동 확인 및 수정

### 학습 개선
- 프로게이머 리플레이 학습
- 봇 리플레이 학습 및 비교
- 빌드오더 파라미터 지속적 업데이트

### 프로세스 관리
- 백그라운드 프로세스 자동 관리
- 리소스 자동 정리
- 다음 반복 준비

## 문제 해결

### 에러가 계속 발생하는 경우
- 수동으로 `tools/fix_all_remaining_errors.py` 실행
- `tools/full_logic_check.py`로 상세 에러 확인

### 게임 학습이 시작되지 않는 경우
- Python 환경 확인
- `run_with_training.py` 직접 실행 테스트
- 에러 로그 확인

### 리플레이 학습이 실패하는 경우
- 리플레이 디렉토리 확인: `D:\replays\replays`
- `sc2reader` 설치 확인: `pip install sc2reader`

## 요약

이 워크플로우는:
- ? 10번 자동 반복 실행
- ? 에러 자동 수정 및 로직 확인
- ? 게임 정상 작동까지 반복
- ? 프로게이머 리플레이 vs 봇 리플레이 비교
- ? 빌드오더 학습 및 게임 훈련 적용
- ? 지속적 개선 및 최적화

**실행 명령:**
```batch
cd wicked_zerg_challenger
bat\iterative_training_workflow_10x.bat
```
