# 게임 멈춤 문제 진단 가이드

**생성일**: 2026-01-14  
**문제**: 게임 내에서 모든 게임이 멈춤

---

## ? 가능한 원인

### 1. 블로킹 파일 I/O 작업
- **위치**: `on_step` 메서드 내부 (매 22프레임마다 실행)
- **문제**: 파일 쓰기 작업이 동기적으로 실행되어 게임 루프를 블로킹
- **영향**: 게임 프레임이 멈추거나 매우 느려짐

### 2. Manager의 무거운 연산
- **ProductionManager.update()**: 복잡한 계산 로직
- **CombatManager.update()**: 많은 유닛 처리
- **EconomyManager.update()**: 건물 배치 계산

### 3. 무한 루프 또는 데드락
- Manager 내부의 반복문이 종료되지 않음
- await 체인이 데드락 상태

### 4. 메모리 누수
- 캐시가 계속 증가하여 메모리 부족
- 가비지 컬렉션이 제대로 작동하지 않음

---

## ? 즉시 확인 사항

### 1. 프로세스 상태 확인
```powershell
Get-Process | Where-Object { $_.ProcessName -like '*SC2*' -or $_.ProcessName -like '*python*' } | Select-Object ProcessName, Id, CPU, WorkingSet, Responding
```

### 2. 로그 파일 확인
- `logs/error_log.txt`: 최근 에러 확인
- 콘솔 출력: 마지막 메시지 확인

### 3. 게임 상태 확인
- 게임이 완전히 멈췄는지, 아니면 매우 느린지 확인
- 프레임 카운터가 증가하는지 확인

---

## ? 해결 방법

### 즉시 조치
1. **게임 프로세스 종료**: 멈춘 게임 강제 종료
2. **Python 프로세스 확인**: 응답하지 않는 프로세스 종료
3. **로그 확인**: 에러 메시지 확인

### 코드 수정 (필요시)
1. **파일 I/O 비동기화**: `on_step` 내부의 파일 쓰기를 비동기로 변경
2. **Manager 호출 최적화**: 무거운 연산을 더 긴 간격으로 실행
3. **타임아웃 추가**: Manager 호출에 타임아웃 추가

---

## ? 다음 단계

1. 프로세스 상태 확인
2. 로그 파일 확인
3. 문제 재현 시나리오 확인
4. 필요시 코드 수정

---

**상태**: ? **진단 중**
