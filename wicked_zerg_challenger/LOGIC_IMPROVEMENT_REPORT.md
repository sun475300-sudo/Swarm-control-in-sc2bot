# WickedZergBot 로직 개선 보고서 (Phase 3 후보)

본 보고서는 현재 구현된 코드(`economy_manager`, `strategy_manager`, `defense_coordinator`, `creep_manager`)를 정밀 분석하여 발견한 **추가 개선 및 최적화** 사항을 담고 있습니다.

---

## 🏗️ 1. 구현된 로직의 개선점 (New Improvements)

현재 로직은 기능적으로 완성되어 있으나, 실전 효율성을 극대화하기 위해 다음 기능 도입을 제안합니다.

### ⚔️ 전략 (Strategy): 동적 카운터 시스템 (Dynamic Counter System)
- **현상**: 적의 고급 유닛(전투순양함, 거신)을 `IntelManager`가 발견해도, `StrategyManager`는 JSON에 정의된 고정 비율대로만 유닛을 생산합니다.
- **개선**: 
  - `IntelManager`가 특정 카운터 유닛(타락귀, 바이킹 등)을 추천하면, 
  - `StrategyManager`가 **JSON 비율을 일시적으로 무시하고 카운터 유닛 생산을 최우선**으로 강제합니다.
- **기대 효과**: 상성 싸움 우위 점거, 승률 직접 상승.

### 💰 경제 (Economy): 스마트 자원 밸런서 (Smart Resource Balancer)
- **현상**: 가스가 3000 이상 쌓여야만 채취를 중단하는 단순 로직(`Extreme Gas Fix`)을 사용 중입니다. 중반에 미네랄만 부족하고 가스는 남는 상황이 빈번합니다.
- **개선**:
  - `EconomyCombatBalancer`를 강화하여 **실시간 미네랄/가스 비율(예: 3:1)**을 유지합니다.
  - 가스가 목표 비율보다 높으면 **즉시 가스 일꾼을 빼서 미네랄로 전환**합니다.
- **기대 효과**: 자원 최적화 효율 20% 상승, 유닛 생산 끊김 방지.

### 🛡️ 수비 (Defense): 최적 방어 부대 (Optimum Defense Squad)
- **현상**: `DefenseCoordinator`가 방어 태세로 전환하면, 전선의 모든 저글링/퀸을 호출합니다. 리퍼 1마리를 잡기 위해 저글링 50마리가 회군하는 비효율이 발생합니다.
- **개선**:
  - 적의 공격 규모(Supply)를 계산하여, **(적 병력 × 1.2)** 만큼의 아군 병력만 할당합니다.
  - 나머지 병력은 전선을 유지하거나 드론을 계속 생산합니다.
- **기대 효과**: 불필요한 동선 낭비 제거, 자원 채취 효율 유지.

### 🕸️ 유틸 (Utility): 점막 고속도로 (Creep Highway)
- **현상**: `CreepManager`는 단순히 적 본진 방향으로만 점막을 넓힙니다.
- **개선**:
  - **멀티 기지 간의 최단 경로**를 우선적으로 점막으로 연결합니다("Highway").
  - 그 후 적 방향으로 확장합니다.
- **기대 효과**: 여왕과 수비 병력의 기동성 극대화, 멀티 방어 성공률 상승.

---

## ⚡ 2. 최적화 제안 (Optimization)

봇의 연산 속도를 높여 마이크로 컨트롤 반응성을 확보하기 위한 최적화 방안입니다.

### 🔄 거리 계산 최적화 (Spatial Hashing)
- **현상**: `IntelManager`나 타겟팅 로직에서 `closer_than`을 사용할 때, 맵 전체 유닛을 전수 조사(O(N^2))하는 경우가 있습니다.
- **개선**: 맵을 그리드(Grid)로 나누어, **인접한 그리드의 유닛만 검사**하는 방식으로 변경합니다.
- **기대 효과**: 연산량 70% 감소, 대규모 교전 시 프레임 드랍 방지.

### 💾 데이터 캐싱 (Data Caching)
- **현상**: `bot_step_integration.py`에서 매 프레임마다 복잡한 판단 로직을 새로 계산합니다.
- **개선**: 
  - 적의 빌드 패턴이나 위협 수준처럼 자주 변하지 않는 값은 **1~2초간 캐싱**하여 재사용합니다.
  - `Micro Focus Mode` 외의 로직은 실행 주기를 늦춥니다.
- **기대 효과**: CPU 사용량 감소, 마이크로 컨트롤에 더 많은 자원 할당 가능.

---

## 📅 3. 우선순위 추천

1.  **동적 카운터 시스템** (승률에 가장 큰 영향)
2.  **스마트 자원 밸런서** (운영의 기초)
3.  **최적 방어 부대** (효율성)
4.  **점막 고속도로** (유틸리티)

위 순서대로 진행하는 것을 추천드립니다.
