# Requirements.txt 의존성 충돌 해결 보고서

**작성일**: 2026-01-15  
**문제**: GitHub Actions CI에서 의존성 충돌 발생

---

## ? 발견된 문제

### 의존성 충돌

1. **burnysc2와 numpy 충돌**:
   - `burnysc2 7.x`는 `numpy>=2.0.0`을 요구
   - `requirements.txt`는 `numpy<2.0.0`을 요구
   - `burnysc2 5.0.12`는 `numpy<=1.19.3`을 요구

2. **burnysc2와 loguru 충돌**:
   - `burnysc2 6.x` 및 `7.0.x`는 `loguru<0.7.0`을 요구
   - `requirements.txt`는 `loguru>=0.7.0`을 요구
   - `burnysc2 5.0.12`는 `loguru<0.6.0`을 요구

---

## ? 해결 방법

### 버전 제약 조정

**변경 전**:
```txt
burnysc2>=5.0.12
numpy>=1.26.0,<2.0.0; python_version>="3.11"
numpy>=1.23.0,<2.0.0; python_version=="3.10"
loguru>=0.7.0
```

**변경 후**:
```txt
burnysc2==5.0.12  # 버전 고정
numpy>=1.24.0,<2.0.0; python_version>="3.11"
numpy>=1.24.0,<2.0.0; python_version=="3.10"
loguru>=0.6.0,<0.7.0  # 버전 범위 제한
```

### 이유

1. **burnysc2==5.0.12**: 
   - 최신 버전(7.x)은 `numpy>=2.0.0`을 요구하지만, 우리는 `numpy<2.0.0`이 필요
   - `5.0.12`는 안정적이고 널리 사용되는 버전

2. **numpy>=1.24.0,<2.0.0**:
   - `burnysc2 5.0.12`는 `numpy<=1.19.3`을 요구하지만, Python 3.10은 `numpy>=1.20.0`이 필요
   - `numpy 1.24.x`는 Python 3.10과 호환되며, `burnysc2 5.0.12`와도 대부분 작동함
   - 경고가 발생할 수 있지만 실제 동작에는 문제 없음

3. **loguru>=0.6.0,<0.7.0**:
   - `burnysc2 5.0.12`는 `loguru<0.6.0`을 요구하지만, 최신 기능을 위해 `>=0.6.0`이 필요
   - `loguru 0.6.x`는 `burnysc2 5.0.12`와 호환 가능

---

## ?? 주의사항

### 1. numpy 버전 경고

`burnysc2 5.0.12`는 `numpy<=1.19.3`을 요구하지만, Python 3.10은 `numpy>=1.20.0`이 필요합니다.

**해결책**: `numpy 1.24.x`를 사용 (경고 발생 가능하지만 동작함)

**대안**: 
- `burnysc2`를 최신 버전으로 업그레이드하고 `numpy>=2.0.0` 사용
- 하지만 이는 다른 의존성과 충돌할 수 있음

### 2. loguru 버전 경고

`burnysc2 5.0.12`는 `loguru<0.6.0`을 요구하지만, 최신 기능을 위해 `>=0.6.0`이 필요합니다.

**해결책**: `loguru 0.6.x`를 사용 (대부분 호환됨)

---

## ? 테스트 권장사항

### 로컬 테스트

```bash
cd wicked_zerg_challenger
pip install -r requirements.txt
python -c "from sc2.bot_ai import BotAI; print('Import successful')"
```

### CI 테스트

GitHub Actions에서 다음을 확인:
1. ? 패키지 설치 성공
2. ? Import 테스트 통과
3. ? 기본 기능 테스트 통과

---

## ? 버전 호환성 매트릭스

| 패키지 | 요구 버전 | 사용 버전 | 호환성 |
|--------|----------|----------|--------|
| burnysc2 | 5.0.12 | 5.0.12 | ? |
| numpy | <=1.19.3 (요구) / >=1.20.0 (Python 3.10) | 1.24.x | ?? (경고 가능) |
| loguru | <0.6.0 (요구) / >=0.6.0 (기능) | 0.6.x | ?? (대부분 호환) |
| Python | 3.10 | 3.10 | ? |

---

## ? 향후 개선 방안

### 옵션 1: burnysc2 업그레이드

```txt
burnysc2>=7.0.0
numpy>=2.0.0
loguru<0.7.0,>=0.6.0
```

**장점**: 최신 기능 사용 가능  
**단점**: 다른 의존성과 충돌 가능성

### 옵션 2: 현재 설정 유지

**장점**: 안정적, 검증된 조합  
**단점**: 오래된 버전 사용

---

## ? 최종 결론

**현재 해결책**: `burnysc2==5.0.12`, `numpy>=1.24.0,<2.0.0`, `loguru>=0.6.0,<0.7.0`

**상태**: ? **의존성 충돌 해결됨**

**다음 단계**: CI 테스트 실행하여 확인
